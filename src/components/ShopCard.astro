---
import { Image } from "astro:assets";
import type { CoffeeShop } from "../coffeeshopData";
import defaultImage from "../img/default-espresso.jpg";

interface Props {
  coffeeshop: CoffeeShop;
  buttonText: string;
}

const { coffeeshop, buttonText } = Astro.props;

// Truncate description to 10 words
const truncateDescription = (desc: string, maxWords: number = 18): string => {
  const words = desc.split(" ");
  if (words.length <= maxWords) return desc;
  return `${words.slice(0, maxWords).join(" ")}...`;
};
---

<div class="card glass w-96">
  <figure class="w-full">
    <Image src={defaultImage} alt={coffeeshop.name} />
  </figure>
  <div class="card-body">
    <h2 class="card-title">{coffeeshop.name}</h2>
    <p>{truncateDescription(coffeeshop.description)}</p>
    <div class="card-actions justify-end">
      <button class="btn btn-primary">{buttonText}</button>
    </div>
  </div>
</div>
